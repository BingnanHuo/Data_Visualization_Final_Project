"0","setkey(states_coord, state_code)"
"0","setkey(used_cars, Make)"
"0",""
"0","# Find each state's favorite make "
"0","for (state in unique(used_cars$State)) {"
"0","    sorted <- used_cars[State==state, .N, by=list(Make)]"
"0","    this_fav_make <- sorted[order(-N)]$Make[1]"
"0","    states_coord[.(state), fav_make := this_fav_make]"
"0","}"
"0",""
"0","# Find each state's favorite car manufacturer country "
"0","for (state in unique(used_cars$State)) {"
"0","    sorted2 <- used_cars[State==state, .N, by=list(Country)]"
"0","    this_fav_country <- sorted2[order(-N)]$Country[1]"
"0","    states_coord[.(state), fav_country := this_fav_country]"
"0","}"
"0",""
"0","# Find each state's number of listings"
"0","for (state in unique(used_cars$State)) {"
"0","    num_car_by_state <- used_cars[,.N, State]"
"0","    this_state_n <- num_car_by_state[State==state, N]"
"0","    states_coord[.(state), num_listings := this_state_n]"
"0","}"
"0",""
"0","# Find each state's mean listing price"
"0","for (state in unique(used_cars$State)) {"
"0","    mean_price_by_state <- used_cars[,round(mean(Price),2), State]"
"0","    this_mean <- mean_price_by_state[State==state, V1]"
"0","    states_coord[.(state), mean_price := this_mean]"
"0","}"
